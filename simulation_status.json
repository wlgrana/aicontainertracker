{
  "step": "IDLE",
  "progress": 0,
  "message": "Error: \nInvalid `containerUpserts.push(prisma.container.upsert()` invocation in\nC:\\Users\\Will Grana\\.gemini\\antigravity\\scratch\\aicontainertracker\\lib\\persistence.ts:220:52\n\n  217 }\n  218 \n  219 // Use upsert to handle both creation and updates safely (Fixes race conditions)\nâ†’ 220 containerUpserts.push(prisma.container.upsert(\nForeign key constraint failed on the field: `Container_currentStatus_fkey (index)`",
  "filename": "Horizon Tracking Report.xlsx",
  "rowCount": 0,
  "agentData": {
    "archivist": {
      "filename": "Horizon Tracking Report.xlsx",
      "rowCount": 176,
      "headers": [
        "SHIPMENT ID",
        "Status",
        "CONSIGNEE",
        "VENDOR",
        "CONTAINER",
        "SIZE",
        "SEAL",
        "PCS",
        "CBM",
        "WGT",
        "HBL",
        "MBL",
        "CUSTOMER PO",
        "CARRIER",
        "SERV TYPE\r\nAWS / MLB",
        "ETD POL",
        "POL",
        "ETA POD",
        "POD",
        "FINAL DESTINATION",
        "FINAL DEST ETA",
        "ATD",
        "ATA POD",
        "CNTR AVAIL",
        "OGF DATE",
        "TRUCKER APPT",
        "ACTUAL DEL DATE",
        "EMPTY AVAIL DATE",
        "EMPTY RETURN DATE",
        "LFD"
      ],
      "sampleRow": {
        "SHIPMENT ID": "S25030127446",
        "Status": "BCN",
        "CONSIGNEE": "HORIZON GLOBAL AMERICAS INC",
        "VENDOR": "ZHEJIANG HONGLI (A/LIST) TOOLS CO LTD",
        "CONTAINER": "TCNU3094950",
        "SIZE": "40HC",
        "SEAL": "YMAT099440",
        "PCS": 128,
        "CBM": 16.05,
        "WGT": 4955,
        "HBL": "YMJAW232595336B",
        "MBL": "YMJAW232595336",
        "CUSTOMER PO": 4500033779,
        "CARRIER": "YMJA",
        "SERV TYPE\r\nAWS / MLB": "MLB",
        "ETD POL": 45719,
        "POL": "Ningbo, CN",
        "ETA POD": 45733.17569444444,
        "POD": "Los Angeles, CA",
        "FINAL DESTINATION": "Edgerton, KS",
        "FINAL DEST ETA": 45747,
        "ATD": 45719.229166666664,
        "ATA POD": 45733.17569444444,
        "CNTR AVAIL": 45743,
        "OGF DATE": 45744.63125,
        "TRUCKER APPT": 45747,
        "ACTUAL DEL DATE": 45747,
        "EMPTY AVAIL DATE": 45750.46319444444,
        "EMPTY RETURN DATE": 45750.46319444444,
        "LFD": 45745
      }
    },
    "translator": {
      "mappedCount": 0,
      "confidence": {
        "overallScore": 0.8,
        "summary": "Heuristic Fallback Generated",
        "totalFields": 30,
        "highConfidence": 0,
        "mediumConfidence": 0,
        "lowConfidence": 0,
        "flaggedForReview": 0
      },
      "sampleContainer": {
        "rawRowId": "e4b905ff-f4df-4e25-b4a9-37531b2ad728",
        "fields": {},
        "meta": {
          "SHIPMENT ID": "S25030127446",
          "Status": "BCN",
          "CONSIGNEE": "HORIZON GLOBAL AMERICAS INC",
          "VENDOR": "ZHEJIANG HONGLI (A/LIST) TOOLS CO LTD",
          "CONTAINER": "TCNU3094950",
          "SIZE": "40HC",
          "SEAL": "YMAT099440",
          "PCS": 128,
          "CBM": 16.05,
          "WGT": 4955,
          "HBL": "YMJAW232595336B",
          "MBL": "YMJAW232595336",
          "CUSTOMER PO": 4500033779,
          "CARRIER": "YMJA",
          "SERV TYPE\r\nAWS / MLB": "MLB",
          "ETD POL": 45719,
          "POL": "Ningbo, CN",
          "ETA POD": 45733.17569444444,
          "POD": "Los Angeles, CA",
          "FINAL DESTINATION": "Edgerton, KS",
          "FINAL DEST ETA": 45747,
          "ATD": 45719.229166666664,
          "ATA POD": 45733.17569444444,
          "CNTR AVAIL": 45743,
          "OGF DATE": 45744.63125,
          "TRUCKER APPT": 45747,
          "ACTUAL DEL DATE": 45747,
          "EMPTY AVAIL DATE": 45750.46319444444,
          "EMPTY RETURN DATE": 45750.46319444444,
          "LFD": 45745,
          "mappings": {
            "SHIPMENT ID": "shipmentReference",
            "Status": "currentStatus",
            "CONSIGNEE": "consignee",
            "VENDOR": "shipper",
            "CONTAINER": "containerNumber",
            "SIZE": "containerType",
            "SEAL": "sealNumber",
            "PCS": "pieces",
            "CBM": "volumeCbm",
            "WGT": "grossWeight",
            "HBL": "hbl",
            "MBL": "mbl_or_booking",
            "CUSTOMER PO": "customerPo",
            "CARRIER": "carrier",
            "SERV TYPE\r\nAWS / MLB": "serviceType",
            "ETD POL": "etd",
            "POL": "pol",
            "ETA POD": "eta",
            "POD": "pod",
            "FINAL DESTINATION": "finalDestination",
            "FINAL DEST ETA": "finalDestinationEta",
            "ATD": "atd",
            "ATA POD": "ata",
            "OGF DATE": "gateOutDate",
            "TRUCKER APPT": "metadata.truckerAppointment",
            "ACTUAL DEL DATE": "deliveryDate",
            "EMPTY AVAIL DATE": "metadata.emptyAvailableDate",
            "EMPTY RETURN DATE": "emptyReturnDate",
            "LFD": "lastFreeDay"
          },
          "source": "Translator",
          "confidence": 0.8
        },
        "overallConfidence": 0,
        "flagsForReview": [
          "Missing Container Number"
        ]
      },
      "schemaMapping": {
        "fieldMappings": {
          "shipmentReference": {
            "sourceHeader": "SHIPMENT ID",
            "targetField": "shipmentReference",
            "confidence": 0.99,
            "transformationType": "direct",
            "notes": "Heuristic Reinforcement"
          },
          "currentStatus": {
            "sourceHeader": "Status",
            "targetField": "currentStatus",
            "confidence": 0.99,
            "transformationType": "direct",
            "notes": "Heuristic Reinforcement"
          },
          "consignee": {
            "sourceHeader": "CONSIGNEE",
            "targetField": "consignee",
            "confidence": 0.99,
            "transformationType": "direct",
            "notes": "Heuristic Reinforcement"
          },
          "shipper": {
            "sourceHeader": "VENDOR",
            "targetField": "shipper",
            "confidence": 0.99,
            "transformationType": "direct",
            "notes": "Heuristic Reinforcement"
          },
          "containerNumber": {
            "sourceHeader": "CONTAINER",
            "targetField": "containerNumber",
            "confidence": 0.99,
            "transformationType": "direct",
            "notes": "Heuristic Reinforcement"
          },
          "containerType": {
            "sourceHeader": "SIZE",
            "targetField": "containerType",
            "confidence": 0.99,
            "transformationType": "direct",
            "notes": "Heuristic Reinforcement"
          },
          "sealNumber": {
            "sourceHeader": "SEAL",
            "targetField": "sealNumber",
            "confidence": 0.99,
            "transformationType": "direct",
            "notes": "Heuristic Reinforcement"
          },
          "pieces": {
            "sourceHeader": "PCS",
            "targetField": "pieces",
            "confidence": 0.99,
            "transformationType": "direct",
            "notes": "Heuristic Reinforcement"
          },
          "volumeCbm": {
            "sourceHeader": "CBM",
            "targetField": "volumeCbm",
            "confidence": 0.99,
            "transformationType": "direct",
            "notes": "Heuristic Reinforcement"
          },
          "grossWeight": {
            "sourceHeader": "WGT",
            "targetField": "grossWeight",
            "confidence": 0.99,
            "transformationType": "direct",
            "notes": "Heuristic Reinforcement"
          },
          "hbl": {
            "sourceHeader": "HBL",
            "targetField": "hbl",
            "confidence": 0.99,
            "transformationType": "direct",
            "notes": "Heuristic Reinforcement"
          },
          "mbl": {
            "sourceHeader": "MBL",
            "targetField": "mbl",
            "confidence": 0.99,
            "transformationType": "direct",
            "notes": "Heuristic Reinforcement"
          },
          "customerPo": {
            "sourceHeader": "CUSTOMER PO",
            "targetField": "customerPo",
            "confidence": 0.99,
            "transformationType": "direct",
            "notes": "Heuristic Reinforcement"
          },
          "carrier": {
            "sourceHeader": "CARRIER",
            "targetField": "carrier",
            "confidence": 0.99,
            "transformationType": "direct",
            "notes": "Heuristic Reinforcement"
          },
          "serviceType": {
            "sourceHeader": "SERV TYPE\r\nAWS / MLB",
            "targetField": "serviceType",
            "confidence": 0.99,
            "transformationType": "direct",
            "notes": "Heuristic Reinforcement"
          },
          "etd": {
            "sourceHeader": "ETD POL",
            "targetField": "etd",
            "confidence": 0.99,
            "transformationType": "direct",
            "notes": "Heuristic Reinforcement"
          },
          "pol": {
            "sourceHeader": "POL",
            "targetField": "pol",
            "confidence": 0.99,
            "transformationType": "direct",
            "notes": "Heuristic Reinforcement"
          },
          "eta": {
            "sourceHeader": "ETA POD",
            "targetField": "eta",
            "confidence": 0.99,
            "transformationType": "direct",
            "notes": "Heuristic Reinforcement"
          },
          "pod": {
            "sourceHeader": "POD",
            "targetField": "pod",
            "confidence": 0.99,
            "transformationType": "direct",
            "notes": "Heuristic Reinforcement"
          },
          "finalDestination": {
            "sourceHeader": "FINAL DESTINATION",
            "targetField": "finalDestination",
            "confidence": 0.99,
            "transformationType": "direct",
            "notes": "Heuristic Reinforcement"
          },
          "finalDestinationEta": {
            "sourceHeader": "FINAL DEST ETA",
            "targetField": "finalDestinationEta",
            "confidence": 0.99,
            "transformationType": "direct",
            "notes": "Heuristic Reinforcement"
          },
          "atd": {
            "sourceHeader": "ATD",
            "targetField": "atd",
            "confidence": 0.99,
            "transformationType": "direct",
            "notes": "Heuristic Reinforcement"
          },
          "ata": {
            "sourceHeader": "ATA POD",
            "targetField": "ata",
            "confidence": 0.99,
            "transformationType": "direct",
            "notes": "Heuristic Reinforcement"
          },
          "gateOutDate": {
            "sourceHeader": "OGF DATE",
            "targetField": "gateOutDate",
            "confidence": 0.99,
            "transformationType": "direct",
            "notes": "Heuristic Reinforcement"
          },
          "metadata.truckerAppointment": {
            "sourceHeader": "TRUCKER APPT",
            "targetField": "metadata.truckerAppointment",
            "confidence": 0.99,
            "transformationType": "direct",
            "notes": "Heuristic Reinforcement"
          },
          "deliveryDate": {
            "sourceHeader": "ACTUAL DEL DATE",
            "targetField": "deliveryDate",
            "confidence": 0.99,
            "transformationType": "direct",
            "notes": "Heuristic Reinforcement"
          },
          "metadata.emptyAvailableDate": {
            "sourceHeader": "EMPTY AVAIL DATE",
            "targetField": "metadata.emptyAvailableDate",
            "confidence": 0.99,
            "transformationType": "direct",
            "notes": "Heuristic Reinforcement"
          },
          "emptyReturnDate": {
            "sourceHeader": "EMPTY RETURN DATE",
            "targetField": "emptyReturnDate",
            "confidence": 0.99,
            "transformationType": "direct",
            "notes": "Heuristic Reinforcement"
          },
          "lastFreeDay": {
            "sourceHeader": "LFD",
            "targetField": "lastFreeDay",
            "confidence": 0.99,
            "transformationType": "direct",
            "notes": "Heuristic Reinforcement"
          }
        },
        "unmappedSourceFields": [
          {
            "sourceHeader": "CNTR AVAIL",
            "sampleValue": null,
            "suggestedField": null,
            "confidence": 0,
            "potentialMeaning": "Unknown"
          }
        ],
        "missingSchemaFields": [
          "currentLocation"
        ],
        "detectedForwarder": "Unknown"
      },
      "schemaStats": {
        "sourceColumns": 30,
        "schemaFields": 26,
        "mapped": 29,
        "unmapped": 1,
        "missing": 1
      }
    },
    "auditor": {
      "verifiedCount": 0,
      "discrepancyCount": 1,
      "sampleAnalysis": {
        "container": "YMMU4177476",
        "raw": {
          "SHIPMENT ID": "S25030128871",
          "Status": "RTN",
          "CONSIGNEE": "HORIZON GLOBAL AMERICAS INC",
          "VENDOR": "BEST UNISON INTERNATIONAL LIMITED",
          "CONTAINER": "YMMU4177476",
          "SIZE": "40GP",
          "SEAL": "YMAT071970",
          "PCS": 580,
          "CBM": 53.94,
          "WGT": 9616.4,
          "HBL": "YMJAW237023630",
          "MBL": "YMJAW237023630",
          "CUSTOMER PO": "4500034016",
          "CARRIER": "YMJA",
          "SERV TYPE\r\nAWS / MLB": "MLB",
          "ETD POL": 45743,
          "POL": "Shanghai, CN",
          "ETA POD": 45760.2875,
          "POD": "Long Beach, CA",
          "FINAL DESTINATION": "Edgerton, KS",
          "FINAL DEST ETA": 45777,
          "ATD": 45743.458333333336,
          "ATA POD": 45760.2875,
          "CNTR AVAIL": 45774,
          "OGF DATE": 45777,
          "TRUCKER APPT": 45777,
          "ACTUAL DEL DATE": 45777,
          "EMPTY AVAIL DATE": 45800.60902777778,
          "EMPTY RETURN DATE": 45800.60902777778,
          "LFD": 45776
        },
        "db": {
          "metadata": {
            "CNTR AVAIL": 45774
          },
          "shipmentReference": "S25030128871",
          "currentStatus": "RTN",
          "consignee": "HORIZON GLOBAL AMERICAS INC",
          "shipper": "BEST UNISON INTERNATIONAL LIMITED",
          "containerNumber": "YMMU4177476",
          "containerType": "40GP",
          "sealNumber": "YMAT071970",
          "pieces": "580",
          "volumeCbm": "53.94",
          "grossWeight": "9616.4",
          "hbl": "YMJAW237023630",
          "mbl": "YMJAW237023630",
          "customerPo": "4500034016",
          "carrier": "YMJA",
          "serviceType": "MLB",
          "etd": "2025-03-27T00:00:00.000Z",
          "pol": "Shanghai, CN",
          "eta": "2025-04-13T06:54:00.000Z",
          "pod": "Long Beach, CA",
          "finalDestination": "Edgerton, KS",
          "finalDestinationEta": "2025-04-30T00:00:00.000Z",
          "atd": "2025-03-27T11:00:00.000Z",
          "ata": "2025-04-13T06:54:00.000Z",
          "gateOutDate": "2025-04-30T00:00:00.000Z",
          "metadata.truckerAppointment": "45777",
          "deliveryDate": "2025-04-30T00:00:00.000Z",
          "metadata.emptyAvailableDate": "45800.60902777778",
          "emptyReturnDate": "2025-05-23T14:37:00.000Z",
          "lastFreeDay": "2025-04-29T00:00:00.000Z"
        },
        "unmapped": [
          "CNTR AVAIL"
        ],
        "captureRate": 0.9,
        "proposedPatches": {
          "CNTR AVAIL": "metadata.containerAvailableDate"
        }
      },
      "patchedCount": 1
    }
  },
  "enrichEnabled": true,
  "forwarder": null,
  "logFilename": "Horizon_Tracking_Report_FRONTEND_1768927111764.log",
  "timestamp": 1768927160169,
  "metrics": {
    "source": {
      "filename": "Horizon Tracking Report.xlsx",
      "totalRows": 176,
      "totalCols": 30
    },
    "baseline": {},
    "final": {},
    "improvement": {},
    "translation": {
      "mapped": 0,
      "confidence": 0.8,
      "unmappedFields": 1
    }
  }
}